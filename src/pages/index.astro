---
export const prerender = false;

import "../styles/global.css";

const PHRASES = [
    "null is a form of denial",
    "We see no reason to accept in syntax what we would reject in prose",
    "We do not apologize",
    "We did not so much design this feature as discover it",
    "We are, for once, in agreement with every style guide",
    "We acknowledge this and are at peace with it",
];

const phraseIndex = Math.floor(Math.random() * PHRASES.length);
const phrase = PHRASES[phraseIndex];
---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link
            rel="apple-touch-icon"
            sizes="180x180"
            href="/apple-touch-icon.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="/favicon-32x32.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            href="/favicon-16x16.png"
        />
        <link rel="icon" href="/favicon.ico" />
        <link rel="manifest" href="/site.webmanifest" />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />
        <meta property="og:image" content="/og-image.png" />
        <title>lang.md</title>
    </head>
    <body
        class="p-6 flex flex-col items-center justify-center w-screen h-screen"
    >
        <h1
            class="title text-6xl md:text-7xl text-balance italic font-serif text-center max-w-4xl"
        >
            {phrase}
        </h1>
        <form
            class="max-w-md w-full border rounded-2xl flex flex-col md:flex-row mt-12 font-sans"
        >
            <input
                class="flex-1 rounded-xl rounded-b-none px-4 py-4 md:rounded-tr-none md:rounded-bl-xl"
                type="email"
                placeholder="you@example.com"
                name="email"
            />
            <button
                class="hover:bg-neutral-500 rounded-t-none md:rounded-tr-xl md:rounded-bl-none rounded-xl bg-black transition-colors text-white font-black py-4 px-6"
                >Get Notified â†’</button
            >
        </form>
    </body>
</html>

<script>
    import { actions } from "astro:actions";

    document
        .getElementsByTagName("form")[0]!
        .addEventListener("submit", async (e) => {
            e.preventDefault();

            const form = e.target as HTMLFormElement;
            const formData = new FormData(form);
            const email = formData.get("email");

            if (!email) return;

            await actions.sendEmail({
                email,
            });

            form.reset();
        });
</script>
